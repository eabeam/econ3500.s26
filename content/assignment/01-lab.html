---
title: "Lab 1: Introduction to Stata"
linktitle: "Lab 1"
date: "2026-01-13"
due_date: "2026-01-22"
due_time: "1:15 pm"
menu:
  assignment:
    parent: Labs
    weight: 1
type: docs
output:
  blogdown::html_page:
    toc: true
editor_options: 
  chunk_output_type: console
---


<div id="TOC">
<ul>
<li><a href="#materials" id="toc-materials">Materials</a></li>
<li><a href="#objectives" id="toc-objectives">Objectives</a></li>
<li><a href="#general-command-structure" id="toc-general-command-structure">General command structure</a>
<ul>
<li><a href="#key-commands" id="toc-key-commands">Key commands</a></li>
<li><a href="#logic-statements" id="toc-logic-statements">Logic statements</a></li>
</ul></li>
<li><a href="#guided-instructions" id="toc-guided-instructions">Guided instructions</a>
<ul>
<li><a href="#hey-stata.-its-nice-to-meet-you" id="toc-hey-stata.-its-nice-to-meet-you">Hey, Stata. It’s nice to meet you</a></li>
<li><a href="#log-files" id="toc-log-files">Log files</a></li>
<li><a href="#working-directories-important" id="toc-working-directories-important">Working directories (important!)</a></li>
<li><a href="#opening-data-files" id="toc-opening-data-files">Opening data files</a></li>
<li><a href="#looking-at-data" id="toc-looking-at-data">Looking at data</a></li>
<li><a href="#examining-variables" id="toc-examining-variables">Examining variables</a></li>
<li><a href="#creating-new-variables" id="toc-creating-new-variables">Creating new variables</a></li>
</ul></li>
<li><a href="#lab-1" id="toc-lab-1">Lab Exercise 1</a>
<ul>
<li><a href="#what-do-i-submit" id="toc-what-do-i-submit">What do I submit?</a></li>
<li><a href="#questions" id="toc-questions">Questions</a></li>
</ul></li>
</ul>
</div>

<p><a href="../01-lab.pdf"><strong>Download print-friendly version (pdf)</strong></a></p>
<div id="materials" class="section level2 unnumbered">
<h2>Materials</h2>
<ul>
<li><a href="../materials/driving_2004.dta"><code>driving_2004.dta</code></a></li>
</ul>
</div>
<div id="objectives" class="section level2 unnumbered">
<h2>Objectives<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></h2>
<p>By the end of this tutorial you should be able to complete the following
tasks in Stata:</p>
<ul>
<li>Identify key areas of the Stata interface</li>
<li>Open a data file</li>
<li>Understand what a working directory is</li>
<li>Summarize and tabulate data</li>
<li>Make a variable</li>
<li>Create and save a log file</li>
<li>Open, view, and save a data file</li>
<li>Ask Stata for help</li>
</ul>
<p>If you need more help, check out <a href="/bonus/stata-resources">Stata Resources</a>.</p>
<p><em>For the hardcore R users in this class who prefer to use R throughout, you may complete this lab in R. But, it could also be fun to learn a little Stata!</em></p>
</div>
<div id="general-command-structure" class="section level2">
<h2>General command structure</h2>
<p><code>do {something} ... with {variable(s) x}...if {something is true..}, options</code></p>
<p><strong>Note:</strong> In this lab, you may type commands directly into the Command window. Later in the course, we will use <em>do-files</em>, which allow you to save and rerun your code. For now, your log file will serve as a record of your work.</p>
<div id="key-commands" class="section level3 unnumbered">
<h3>Key commands</h3>
<table>
<colgroup>
<col width="56%" />
<col width="44%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">command</th>
<th align="right">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>log using logfile1.log</code></td>
<td align="right">open and log using <code>logfile1.log</code></td>
</tr>
<tr class="even">
<td align="left"><code>log close</code></td>
<td align="right">close log</td>
</tr>
<tr class="odd">
<td align="left"><code>use dataset.dta, clear</code></td>
<td align="right">open dataset <code>dataset.dta</code>, clear out old one</td>
</tr>
<tr class="even">
<td align="left"><code>describe var1 var2 ...</code></td>
<td align="right">charcteristics of <code>var1</code>, <code>var2</code>, etc.</td>
</tr>
<tr class="odd">
<td align="left"><code>browse var1 var2 ...</code></td>
<td align="right">open data browser, display <code>var1, var2 ..</code></td>
</tr>
<tr class="even">
<td align="left"><code>lookfor text1</code></td>
<td align="right">search for <em>text1</em> in variable names/descriptions</td>
</tr>
<tr class="odd">
<td align="left"><code>tabulate var1</code></td>
<td align="right">make a frequency table of <code>var1</code>.</td>
</tr>
<tr class="even">
<td align="left"><code>tabulate var1 var2</code></td>
<td align="right">make a cross-tabulation of <code>var1</code> and <code>var2</code>.</td>
</tr>
<tr class="odd">
<td align="left"><code>summarize var1</code></td>
<td align="right">descriptive statistics for <code>var1</code>.</td>
</tr>
<tr class="even">
<td align="left"><code>summarize var1 , detail</code></td>
<td align="right">detailed descriptive statistics for <code>var1</code>.</td>
</tr>
<tr class="odd">
<td align="left"><code>gen var1 = binexp</code></td>
<td align="right">generates a variable <code>var1</code> equal to 1 if binary expression true, 0 otherwise</td>
</tr>
<tr class="even">
<td align="left"><code>replace var1 = 0 if binexp</code></td>
<td align="right">replaces <code>var1</code> to be 0 if binary expression true, nothing otherwise</td>
</tr>
<tr class="odd">
<td align="left"><code>help command</code></td>
<td align="right">open help files for <code>command</code>.</td>
</tr>
</tbody>
</table>
</div>
<div id="logic-statements" class="section level3 unnumbered">
<h3>Logic statements</h3>
<p>These are some common logical statements</p>
<table>
<colgroup>
<col width="53%" />
<col width="46%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">operation</th>
<th align="center">command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">and</td>
<td align="center">&amp;</td>
</tr>
<tr class="even">
<td align="left">or</td>
<td align="center">| <br> (vertical bar, on same key as “/”)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">equal to</td>
<td align="center">==</td>
</tr>
<tr class="odd">
<td align="left">not equal to</td>
<td align="center">!=</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">greater than</td>
<td align="center">&gt;</td>
</tr>
<tr class="even">
<td align="left">less than</td>
<td align="center">&gt;</td>
</tr>
<tr class="odd">
<td align="left">greater than or equal to</td>
<td align="center">&gt;=</td>
</tr>
<tr class="even">
<td align="left">less than or equal to</td>
<td align="center">&lt;=</td>
</tr>
</tbody>
</table>
<ul>
<li><code>tab bac10 if gdl==1 &amp; sl70plus == 0</code>
<ul>
<li>Tabulates the variable <code>bac10</code> but only if <code>gdl</code> equals one <em>and</em> <code>sl70plus</code> equals 0</li>
</ul></li>
<li><code>tab bac10 if year &gt;=2000</code>
<ul>
<li>Tabulates the variable <code>bac10</code> for the years 2000, 2001, 2002, etc.</li>
</ul></li>
<li><code>tab bac10 if year !=2000</code>:
<ul>
<li>Tabulates the variable <code>bac10</code> for every year <em>but</em> 2000</li>
</ul></li>
<li><code>tab bac10 if year &lt; 2008 &amp; year &gt; 2005</code>
<ul>
<li>Tabulates the variable <code>bac10</code> 2006 and 2007</li>
</ul></li>
<li><code>tab bac10 if year &lt; 2008 | year &gt; 2005</code>
<ul>
<li>Tabulates the variable <code>bac10</code> is less than 2008 OR greater than 2005 (all years!)</li>
</ul></li>
</ul>
<p><strong>Also:</strong> you can use parentheses to group terms appropriately. For example, if you want to tabulate states where the speed limit is 55 or 65 AND the blood alcohol limit is 0.10, then this is wrong:</p>
<p><code>tab state if sl55 == 1 | sl65 == 1 &amp; bac10 == 1</code></p>
<p>But this is correct!</p>
<p><code>tab state if (sl55 == 1 | sl65 == 1) &amp; bac10 == 1</code></p>
<p>Thanks, parentheses!</p>
</div>
</div>
<div id="guided-instructions" class="section level2">
<h2>Guided instructions</h2>
<div id="hey-stata.-its-nice-to-meet-you" class="section level3">
<h3>Hey, Stata. It’s nice to meet you</h3>
<p>Start by opening Stata. You should have a window that looks something
like this (on a PC):</p>
<p><img src="/img/stata1.png" /></p>
<p>You should now have the Stata window open. There is a set of pull down
menus as well as 4 smaller windows: Review, Variables, Results, and
Command.</p>
<p><img src="/img/stata2.png" /></p>
<p>Also especially helpful are the following buttons:</p>
</div>
<div id="log-files" class="section level3">
<h3>Log files</h3>
<p>If you want to record anything that you do in a Stata session so that
you can look at results or commands later, you need to open a log-file.
A log-file is simply a record of all the commands you enter into Stata
and the output from those commands. The key is to make sure you have a
log file open at the beginning of a Stata session, and to close it once
you have finished, and before you close Stata.</p>
<p>There are three ways you can open a log file:</p>
<ol style="list-style-type: decimal">
<li><p>Go to the <strong>FILE</strong> dropdown menu, choose <strong>Log</strong>, choose <strong>Begin</strong>.
You should see a “Begin Logging Stata Output” dialog box. Browse to
a directory where you can store your log file and type in the
following file name in the File Name space: <code>lab1.log</code></p></li>
<li><p>Click on the log icon at the top of the Stata workspace (right of
the print button). When you click on the log button, the “Begin
Logging Stata Output” dialog box pops up. Name your log file as
above.</p></li>
<li><p>You can open a log file by typing the following in the Stata command
window: <code>log using lab1.log, replace</code></p>
<p>The <code>, replace</code> is optional. If you add it as an <strong>option</strong>, your
new file will overwrite your old one. Or, you can add <code>, append</code> to
add it to the bottom of your old log file.</p></li>
</ol>
<p><em>Tip: Use extension .log, NOT the default .smcl. This will make it
easier for you to edit, cut and paste your log in any text editor.</em></p>
<p>Now that you have a log file open, we can start our STATA session.</p>
</div>
<div id="working-directories-important" class="section level3">
<h3>Working directories (important!)</h3>
<p>Stata looks for data files in its <em>working directory</em>. To see your current
working directory, type:</p>
<p><code>pwd</code></p>
<p>If your data file is not located there, Stata will not find it. You can
change your working directory using:</p>
<p><code>cd "/path/to/your/folder"</code></p>
<p>Once you run this command, Stata will make this working directory its starting point, but only for the rest of the session. The next time you open Stata, you may need to repeat the process.</p>
<p>I recommend creating a folder for this class (e.g., <code>econ3500/labs/</code>) and saving both your data and log files there.</p>
</div>
<div id="opening-data-files" class="section level3">
<h3>Opening data files</h3>
<p>Stata data files end with the extension <code>.dta</code>, and they can only be
read by Stata. You can import text files and excel files into Stata, and
you can export <code>.dta</code> files into text files or Excel files, but we’ll
cover this later.</p>
<p>There are three ways to open a data file:</p>
<ol style="list-style-type: decimal">
<li><p>Outside Stata, double click on the data file you want to open</p></li>
<li><p>Use the <strong>FILE/OPEN</strong> drop down menu in Stata and open the data set
that you copied into your folder. Note that in
the command window, the <code>use</code> command appears. We’ll use that one
later.</p></li>
<li><p>Type <code>use filename.dta, clear</code> into the command window within Stata. The option <code>, clear</code> tells Stata to remove any data currently in memory.
Stata can only hold one dataset at a time.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p></li>
</ol>
<p>Download <a href="../materials/driving_2004.dta"><code>driving_2004.dta</code></a> and open it. I recommend moving it to your brand new class folder first. It is a
file of driving laws, vehicle accidents, and fatalities in the United
States in 2004.</p>
<p>You should now see the list of variables appear in the Variables window,
with the variable name, variable label, and some other information.</p>
</div>
<div id="looking-at-data" class="section level3">
<h3>Looking at data</h3>
<p>Let’s take a more detailed look at the variables in the dataset.</p>
<p>In the command window type: <code>describe</code></p>
<p>At the top of the output you will see some overall features of the file,
including the number of variables. Below that you will see a list of
every variable, including the variable name, the “storage type” (byte,
float, int, etc.) and the variable label. If you see <code>–more–</code> at the
bottom of your screen, press the space bar to continue scrolling.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>To learn more about the variables and the organization of the data, use
the <code>browse</code> command. Type: <code>browse</code> (or click on the “browse” button).</p>
<p>Another approach is to add a variable list to the browse command. Type
the following:</p>
<p><code>browse year sl70plus bac10 bac08 gdl</code></p>
<p><em>Again, note that you can also double click on the variable names so you
don’t have to type them all!</em></p>
<p>This command directs you to a spreadsheet inside Stata where the data
appears. This looks a lot like an Excel spreadsheet!</p>
<p>Note the following:</p>
<ul>
<li><p>Each observation appears on a separate row of the spreadsheet, which
represents data from a certain year and a certain state. For example
the first row is for state 1 (Alabama) in 1980. If you move along
the row, you can see other characteristics about Alabama in 1980.</p></li>
<li><p>Each variable appears in a separate column, and the name of the
variable is at the column heading.</p></li>
</ul>
<blockquote>
<p>How many observations are there? What type of data set is this?</p>
</blockquote>
</div>
<div id="examining-variables" class="section level3">
<h3>Examining variables</h3>
<p>Let’s look at the variables that are included in the data set. There is
an efficient way to find the names of variables you are interested in.
Suppose you are interested in a variable related to alcohol laws. Type
in:</p>
<p><code>lookfor alcohol</code></p>
<p>This will give you a list of all the variables that have “alcohol” in
either their variable name or variable label. In this case, two
variables appear - <code>bac10</code> and <code>bac08</code>.</p>
<p>You can also experiment with all possible combinations of the col, row,
and cell options, and add the <code>nofreq</code> option to suppress the number of
observations. Use help for details:</p>
<p><code>help tab</code></p>
<p>When you are analyzing variables, you will want to think carefully about
whether you should be looking at row percentages, column percentages, or
cell percentages.</p>
</div>
<div id="creating-new-variables" class="section level3">
<h3>Creating new variables</h3>
<p>You can create new variables using the <code>generate</code> command. For example:</p>
<p><code>gen highfatal = fatal_rate &gt; 1.5</code></p>
<p>This creates a variable equal to 1 when the condition is true, and 0 otherwise.</p>
<p>You could create the same variable in a slightly different way:</p>
<pre class="stata"><code>gen highfatal = 1         if fatal_rate &gt; 1.5 
  replace highfatal = 0   if fatal_rate &lt; 1.5</code></pre>
</div>
</div>
<div id="lab-1" class="section level2 unnumbered">
<h2>Lab Exercise 1</h2>
<p><em>First, work through the above steps. Then, work through the 7 questions below.</em></p>
<div id="what-do-i-submit" class="section level3">
<h3>What do I submit?</h3>
<ol style="list-style-type: decimal">
<li>Your written up answers to exercise questions (1) - (7). This can be typed or written out then scanned (or photographed), in any reasonable format</li>
<li>A log file that contains the results from the steps prior to the exercise <em>and</em> the exercise itself.</li>
</ol>
<p><em>If you struggled or explored, this might get excessively long! Three choices (1) submit it anyways, (2) open it in a text editor manually delete the nonsense, (3) close your log file and start a new one, and this time run through your code with less backtracking. Option (1) is completely fine.</em></p>
</div>
<div id="questions" class="section level3">
<h3>Questions</h3>
<ol style="list-style-type: decimal">
<li><p>How many states have graduated drivers license laws (GDLs)? How many
states have speed limits of 70 mph or higher (including no speed
limit)?</p></li>
<li><p>What percentage of states with GDLs <em>and</em> with low speed limits
(<em>below</em> 70 mph) have blood-alcohol limits of 0.10 (the more lenient
level)? <em>Note that some states have blood-alcohol limit for a
fraction of a year. If so, consider having a limit of 0.10 in place
for part of the year as having a limit</em></p></li>
<li><p>What is the mean fatality rate per 100 million miles across all
states? What is the standard deviation?</p></li>
<li><p>What was the fatality rate (deaths per 100 million miles) in
Vermont? (Vermont is state 46)</p></li>
<li><p>Generate a variable <span class="math inline">\(Y\)</span> equal to one if a state has a fatality rate
per 100 million miles that is above the mean, and zero otherwise.
What is <span class="math inline">\(E(Y)\)</span>?</p></li>
<li><p>Write a joint probability distribution table for the following two
random variables: <span class="math inline">\(X\)</span>, a random variable equal to one if a state has
a speed limit of 70 or greater and zero otherwise (see <code>sl70plus</code>),
and <span class="math inline">\(Y\)</span>, the random variable developed in the previous part.</p></li>
<li><p><em>Look up the command <code>correlate</code> in the help files</em>: What is the
correlation coefficient between nighttime fatalities per 100,000
population and weekend accidents per 100,000 population? Why might
this correlation be so strong?</p></li>
</ol>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>This lab draws heavily on Anne Fitzpatrick’s (UMass-Boston) excellent materials.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Yes, this is a pain.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>If you are tired of dealing with the “more” issue, you can enable <code>set more off</code> into the command window to enable continuous scrolling for your session. If you’re just done with it, try <code>set more off, perm</code> to enable continuous scrolling for this and all future sessions.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
